{% extends 'base.html' %}

{% block content %}

{% if user.is_authenticated %}
<h1>Welcome World</h1>
<h1>Records</h1>

<!-- Filtering Form -->
<form method="GET" action="">
    <div class="mb-3">
        <label for="gender">Filter by Gender:</label>
        <select name="gender" class="form-control">
            <option value="">All</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select>
    </div>
    <div class="mb-3">
        <label for="sector">Filter by Sector:</label>
        <select name="sector" class="form-control">
            <option value="">All</option>
            <option value="Administrative sector">Administrative sector</option>
            <option value="Service Sector">Service Sector</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Apply Filters</button>
</form>

<!-- Sorting Links -->
<p>Sort by:</p>
<ul class="list-inline">
    <li class="list-inline-item"><a href="?sort=first_name">First Name</a></li>
    <li class="list-inline-item"><a href="?sort=last_name">Last Name</a></li>
    <li class="list-inline-item"><a href="?sort=birth_date">Birth Date</a></li>
    <!-- Add more sorting options as needed -->
</ul>

<table class="table table-striped table-hover table-bordered">
  <thead class="table-dark">
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Created_at</th>
      <th scope="col">First & Last Name</th>
      <th scope="col">Phone</th>
      <th scope="col">Address</th>
      <th scope="col">Doctor ID</th>
      <th scope="col">Staff ID</th>
      <th scope="col">Specialization</th>
      <th scope="col">Birth Date</th>
      <th scope="col">Gender</th>
      <th scope="col">Sector</th>
      <th scope="col">Job Title</th>
    </tr>
  </thead>
  <tbody>
    {% if records %}
      {% for record in records %}
          <tr>
            <td><a href="{% url 'record' record.id %}">{{ record.id }}</a></td>
            <td>{{ record.created_at }}</td>
            <td>{{ record.first_name }} {{ record.last_name }}</td>
            <td>{{ record.phone }}</td>
            <td>{{ record.full_address }}</td>
            <td>{{ record.doctor_id }}</td>
            <td>{{ record.staff_id }}</td>
            <td>{{ record.specialization }}</td>
            <td>{{ record.birth_date }}</td>
            <td>{{ record.gender }}</td>
            <td>{{ record.sector }}</td>
            <td>{{ record.job_title }}</td>
          </tr>
      {% endfor %}
    {% endif %}
  </tbody>
</table>

<br/>

{% else %}
<div class="col-md-6 offset-md-3">
<h1>Login</h1>
<br/>
<form method="POST" action="{% url 'home' %}">
    {% csrf_token %}
        <div class="mb-3">
          <input type="text" class="form-control" name="username" placeholder="Username" required>
        </div>
        <br/>
        <div class="mb-3">
          <input type="password" class="form-control" name="password" placeholder="Password" required>
        </div>
        <br/>
        <button type="submit" class="btn btn-secondary">Login</button>
</form>

{% endif %}
{% endblock %}
